#include <bits/stdc++.h>
using namespace std;
double a = 12612.621;
double b = 1.87 * pow(10, -3);
double r = 518.00, t = 223.15, p = 65000000;

double f(double x)
{

    double t1 = (r * t) / (x - b), t2 = a / (x * (x + b) * sqrt(t));
    return p - t1 + t2;
}
double df(double x)
{

    double t1 = (r * t) / pow((x - b), 2), t2 = (a * (2 * x + b)) / (sqrt(t) * pow((pow(x, 2) + b * x), 2));
    return t1 - t2;
}
int main()
{

    double x0 = 1.78 * (pow(10, -3)), x1;
    int i = 0;
    cout << "Iteraion     " << "v0     " << "v1     " << "f(v)     " << "df(v)     " << "error" << endl;
    while (1)
    {

        x1 = x0 - (f(x0) / df(x0));
        cout << i << "  " << x0 << "  " << x1 << "  " << f(x0) << "  " << df(x0) << "  " << (fabs((x1 - x0) / x1)) << endl;

        if ((fabs((x1 - x0) / x1)) < 0.001)
            break;
        x0 = x1;
        i++;
    }
    cout << "The vlaue of v" << x1 << endl;
    cout << "Mass: " << 3 / x1 << endl;
}




// console print
// Iteraion     v0                 v1              f(v)            df(v)         error
// 0           0.00178         0.00167554      1.47931e+009    1.4162e+013     0.0623418
// 1           0.00167554      0.00140216      8.01559e+008    2.932e+012      0.194973
// 2           0.00140216      -5.42245e-005   4.961e+008      3.40638e+011    26.8584
// 3           -5.42245e-005   -0.000109314    -8.45022e+009   -1.5339e+014    0.503957
// 4           -0.000109314    -0.000222675    -4.26341e+009   -3.76092e+013   0.509086
// 5           -0.000222675    -0.000467427    -2.1815e+009    -8.91312e+012   0.523616
// 6           -0.000467427    -0.00111363     -1.1734e+009    -1.81584e+012   0.580268
// 7           -0.00111363     0.000937401     -8.98637e+008   4.38139e+011    2.188
// 8           0.000937401     0.00251257      5.09777e+008    -3.23633e+011   0.626915
// 9           0.00251257      0.00267733      -3.82137e+007   2.31941e+011    0.0615375
// 10          0.00267733      0.00274214      -8.82804e+006   1.36195e+011    0.023638
// 11          0.00274214      0.00274902      -777746         1.13147e+011    0.00250045
// 12          0.00274902      0.00274908      -7353.6         1.11016e+011    2.4095e-005
// The vlaue of v0: 00274908
// Mass: 1091.27